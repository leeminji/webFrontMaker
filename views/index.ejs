<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title><%=title%></title>
</head>
<body>
	<nav>
		<ul id="menu"></ul>
	</nav>
	
	<script type="text/javascript">
		var jsonMenu = {
			"all" : [
				{"code": "100", "name" : "대메뉴1", "link":"/info"},
				{"code": "200", "name" : "대메뉴2", "link":"/product"},
				{"code": "300", "name" : "대메뉴3", "link":"/content"},
				{"code": "400", "name" : "대메뉴4", "link":"/board"},
				{"code": "500", "name" : "대메뉴5", "link":"/board"}
			],
			"menu01" : [
				{"code": "100100", "name" : "메뉴1-1", "link":"/info/company"},
				{"code": "100200", "name" : "메뉴1-2", "link":"/info/contact"},
				{"code": "100300", "name" : "메뉴1-3", "link":"/info/news"},
				{"code": "100400", "name" : "메뉴1-4", "link":"/info/brand"},
				{"code": "200100", "name" : "메뉴2-1", "link":"/product/1"},
				{"code": "200200", "name" : "메뉴2-2", "link":"/product/2"},
				{"code": "200300", "name" : "메뉴2-3", "link":"/product/3"},
				{"code": "200400", "name" : "메뉴2-4", "link":"/product/4"},
				{"code": "500100", "name" : "메뉴5-1", "link":"/product/4"},
				{"code": "400100", "name" : "메뉴4-1", "link":"/product/4"}
			],
			"menu02" : [
				{"code": "100100100", "name" : "메뉴1-1-1", "link":"/info/company/test"},
				{"code": "100100200", "name" : "메뉴1-1-2", "link":"/info/company/round"},
				{"code": "100200100", "name" : "메뉴1-2-1", "link":"/info/contact/1"},
				{"code": "100300100", "name" : "메뉴1-3-1", "link":"/info/contact/2"},
				{"code": "500100100", "name" : "메뉴5-1-1", "link":"/product/4"}
			],
			"menu03" : [
				{"code": "100100100100", "name" : "메뉴1-1-1-1", "link":"/info/company/test/1"},
				{"code": "100100200100", "name" : "메뉴1-1-2-1", "link":"/info/company/round/1"},
				{"code": "100200100100", "name" : "메뉴1-2-1-1", "link":"/info/contact/1/1"},
				{"code": "100300100100", "name" : "메뉴1-3-1-1", "link":"/info/contact/2/1"},
				{"code": "100300100200", "name" : "메뉴1-3-1-2", "link":"/info/contact/2/1"}

			]
		};
		
		//메뉴셋팅
		var uxMenu = {
			menuJSON : null,
			count : 0,
			init : function(_jsonMenu){
				var thisObj = this;

				//초기셋팅
				thisObj.menuJSON = _jsonMenu;
				
				//메뉴 설정 element
				thisObj.setMenu("menu");

			},
			//4차 메뉴까지 셋팅가능함.
			setMenu : function(el){
				var thisObj = this;
				var strMenu = "";

				for( var obj in thisObj.menuJSON.all ){

					var m = thisObj.menuJSON.all[obj];
					strMenu += "<li><a href='"+m.link+"'>"+m.name+"</a>";
					
					//2차메뉴
					var depth2 = thisObj.menuJSON.menu01.filter(thisObj.filterByCode, {s : m.code});
					var str = depth2.map(function(m, i){
						var str = "<li><a href='"+m.link+"'>"+ m.name + "</a>";
						//3차메뉴
						var depth3 = thisObj.menuJSON.menu02.filter(thisObj.filterByCode, {s:m.code});
						if( depth3.length > 0 ){
							var str2 = depth3.map(function(m, i){
								var str =  "<li><a href='"+m.link+"'>"+m.name+"</a>";
								//4차메뉴
								var depth4 = thisObj.menuJSON.menu03.filter(thisObj.filterByCode, {s:m.code});
								if( depth4.length > 0 ){
									var str3 = depth4.map(function(m,i){
										return "<li><a href='"+m.link+"'>"+m.name+"</a></li>";
									});
									str += "<ul>"+str3.join('')+"</ul>";
								}
								str += "</li>";
								return str;
							});
							str += "<ul>"+str2.join('')+"</ul>";
						}
						str+="</li>";
						return str;
					});

					if( str.length > 0 ){
						strMenu +="<ul>"+str.join('')+"</ul>";
					}
					strMenu +="</li>";

				}
				document.getElementById(el).innerHTML = strMenu;
			},
			filterByCode : function(item){
				if ( item.code.substring(0,this.s.length) == this.s) {
					return true;
				}
				return false; 
			}
		};
		
		//메뉴셋팅
		uxMenu.init(jsonMenu);
	</script>
</body>
</html>